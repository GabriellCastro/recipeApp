{"ast":null,"code":"var _jsxFileName = \"/home/gabriel/processoseletivo/recipesApp/src/pages/Foods.js\";\nimport React, { useEffect, useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport MainContext from '../context/MainContext';\nimport Header from '../components/Header';\nimport FooterMenu from '../components/FooterMenu';\nimport RecipesCardsContainer from '../components/RecipesCardsContainer';\nimport { getInitialMealsRecipes, getMealsCategoryList, getMealsByCategory } from '../services/theMealAPI';\nimport FoodLoader from '../components/FoodLoader';\n\nfunction Foods() {\n  const {\n    setData,\n    loading,\n    setLoading,\n    categoryList,\n    setCategoryList,\n    categorySelected,\n    setCategorySelected\n  } = useContext(MainContext);\n  const {\n    location: {\n      state\n    }\n  } = useHistory();\n\n  function filterByCategory({\n    target: {\n      innerText\n    }\n  }) {\n    if (innerText === categorySelected || innerText === 'All') {\n      getInitialMealsRecipes().then(meals => {\n        setData(meals);\n      });\n    } else {\n      getMealsByCategory(innerText).then(meals => {\n        setData(meals);\n      });\n      setCategorySelected(innerText);\n    }\n  }\n\n  function categoryButtons() {\n    const maxCategoryNumber = 4;\n    return categoryList.map((item, index) => index > maxCategoryNumber ? null : /*#__PURE__*/React.createElement(\"button\", {\n      key: index,\n      type: \"button\",\n      \"data-testid\": `${item.strCategory}-category-filter`,\n      onClick: filterByCategory,\n      className: \"meal-btn-category\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 11\n      }\n    }, item.strCategory));\n  }\n\n  useEffect(() => {\n    if (!state) {\n      setLoading(true);\n      getInitialMealsRecipes().then(meals => {\n        setData(meals);\n        getMealsCategoryList().then(mealsCategory => {\n          setCategoryList(mealsCategory);\n          setLoading(false);\n        });\n      });\n    }\n\n    return () => {\n      setData(['', '']);\n      setCategoryList([]);\n    };\n  }, [setData, setLoading, setCategoryList, state]);\n  return loading ? /*#__PURE__*/React.createElement(FoodLoader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    title: \"Comidas\",\n    isButtonVisible: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"meal-div-category\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    \"data-testid\": \"All-category-filter\",\n    onClick: filterByCategory,\n    className: \"meal-btn-category\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, \"All\"), loading ? null : categoryButtons()), /*#__PURE__*/React.createElement(RecipesCardsContainer, {\n    test: \"recipe\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(FooterMenu, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }\n  }));\n}\n\nexport default Foods;","map":{"version":3,"sources":["/home/gabriel/processoseletivo/recipesApp/src/pages/Foods.js"],"names":["React","useEffect","useContext","useHistory","MainContext","Header","FooterMenu","RecipesCardsContainer","getInitialMealsRecipes","getMealsCategoryList","getMealsByCategory","FoodLoader","Foods","setData","loading","setLoading","categoryList","setCategoryList","categorySelected","setCategorySelected","location","state","filterByCategory","target","innerText","then","meals","categoryButtons","maxCategoryNumber","map","item","index","strCategory","mealsCategory"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,UAA3B,QAA6C,OAA7C;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,WAAP,MAAwB,wBAAxB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,OAAOC,qBAAP,MAAkC,qCAAlC;AACA,SACEC,sBADF,EAEEC,oBAFF,EAGEC,kBAHF,QAKO,wBALP;AAMA,OAAOC,UAAP,MAAuB,0BAAvB;;AAEA,SAASC,KAAT,GAAiB;AACf,QAAM;AACJC,IAAAA,OADI;AAEJC,IAAAA,OAFI;AAGJC,IAAAA,UAHI;AAIJC,IAAAA,YAJI;AAKJC,IAAAA,eALI;AAMJC,IAAAA,gBANI;AAOJC,IAAAA;AAPI,MAQFjB,UAAU,CAACE,WAAD,CARd;AASA,QAAM;AAAEgB,IAAAA,QAAQ,EAAE;AAAEC,MAAAA;AAAF;AAAZ,MAA0BlB,UAAU,EAA1C;;AAEA,WAASmB,gBAAT,CAA0B;AAAEC,IAAAA,MAAM,EAAE;AAAEC,MAAAA;AAAF;AAAV,GAA1B,EAAqD;AACnD,QAAIA,SAAS,KAAKN,gBAAd,IAAkCM,SAAS,KAAK,KAApD,EAA2D;AACzDhB,MAAAA,sBAAsB,GACnBiB,IADH,CACSC,KAAD,IAAW;AACfb,QAAAA,OAAO,CAACa,KAAD,CAAP;AACD,OAHH;AAID,KALD,MAKO;AACLhB,MAAAA,kBAAkB,CAACc,SAAD,CAAlB,CACGC,IADH,CACSC,KAAD,IAAW;AACfb,QAAAA,OAAO,CAACa,KAAD,CAAP;AACD,OAHH;AAIAP,MAAAA,mBAAmB,CAACK,SAAD,CAAnB;AACD;AACF;;AAED,WAASG,eAAT,GAA2B;AACzB,UAAMC,iBAAiB,GAAG,CAA1B;AACA,WAAOZ,YAAY,CAACa,GAAb,CAAiB,CAACC,IAAD,EAAOC,KAAP,KACtBA,KAAK,GAAGH,iBAAR,GAA4B,IAA5B,gBAEI;AACE,MAAA,GAAG,EAAGG,KADR;AAEE,MAAA,IAAI,EAAC,QAFP;AAGE,qBAAe,GAAED,IAAI,CAACE,WAAY,kBAHpC;AAIE,MAAA,OAAO,EAAGV,gBAJZ;AAKE,MAAA,SAAS,EAAC,mBALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAOGQ,IAAI,CAACE,WAPR,CAHC,CAAP;AAaD;;AAED/B,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI,CAACoB,KAAL,EAAY;AACVN,MAAAA,UAAU,CAAC,IAAD,CAAV;AACAP,MAAAA,sBAAsB,GACnBiB,IADH,CACSC,KAAD,IAAW;AACfb,QAAAA,OAAO,CAACa,KAAD,CAAP;AACAjB,QAAAA,oBAAoB,GACjBgB,IADH,CACSQ,aAAD,IAAmB;AACvBhB,UAAAA,eAAe,CAACgB,aAAD,CAAf;AACAlB,UAAAA,UAAU,CAAC,KAAD,CAAV;AACD,SAJH;AAKD,OARH;AASD;;AAAC,WAAO,MAAM;AACbF,MAAAA,OAAO,CAAC,CAAC,EAAD,EAAK,EAAL,CAAD,CAAP;AACAI,MAAAA,eAAe,CAAC,EAAD,CAAf;AACD,KAHC;AAIH,GAhBQ,EAgBN,CAACJ,OAAD,EAAUE,UAAV,EAAsBE,eAAtB,EAAuCI,KAAvC,CAhBM,CAAT;AAkBA,SACEP,OAAO,gBACH,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADG,gBAGH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAQ,IAAA,KAAK,EAAC,SAAd;AAAwB,IAAA,eAAe,MAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AAAK,IAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,IAAI,EAAC,QADP;AAEE,mBAAY,qBAFd;AAGE,IAAA,OAAO,EAAGQ,gBAHZ;AAIE,IAAA,SAAS,EAAC,mBAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WADF,EASGR,OAAO,GAAG,IAAH,GAAUa,eAAe,EATnC,CAFF,eAaE,oBAAC,qBAAD;AAAuB,IAAA,IAAI,EAAC,QAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAbF,eAcE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAdF,CAJN;AAsBD;;AAED,eAAef,KAAf","sourcesContent":["import React, { useEffect, useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport MainContext from '../context/MainContext';\nimport Header from '../components/Header';\nimport FooterMenu from '../components/FooterMenu';\nimport RecipesCardsContainer from '../components/RecipesCardsContainer';\nimport {\n  getInitialMealsRecipes,\n  getMealsCategoryList,\n  getMealsByCategory,\n}\n  from '../services/theMealAPI';\nimport FoodLoader from '../components/FoodLoader';\n\nfunction Foods() {\n  const {\n    setData,\n    loading,\n    setLoading,\n    categoryList,\n    setCategoryList,\n    categorySelected,\n    setCategorySelected,\n  } = useContext(MainContext);\n  const { location: { state } } = useHistory();\n\n  function filterByCategory({ target: { innerText } }) {\n    if (innerText === categorySelected || innerText === 'All') {\n      getInitialMealsRecipes()\n        .then((meals) => {\n          setData(meals);\n        });\n    } else {\n      getMealsByCategory(innerText)\n        .then((meals) => {\n          setData(meals);\n        });\n      setCategorySelected(innerText);\n    }\n  }\n\n  function categoryButtons() {\n    const maxCategoryNumber = 4;\n    return categoryList.map((item, index) => (\n      index > maxCategoryNumber ? null\n        : (\n          <button\n            key={ index }\n            type=\"button\"\n            data-testid={ `${item.strCategory}-category-filter` }\n            onClick={ filterByCategory }\n            className=\"meal-btn-category\"\n          >\n            {item.strCategory}\n          </button>)\n    ));\n  }\n\n  useEffect(() => {\n    if (!state) {\n      setLoading(true);\n      getInitialMealsRecipes()\n        .then((meals) => {\n          setData(meals);\n          getMealsCategoryList()\n            .then((mealsCategory) => {\n              setCategoryList(mealsCategory);\n              setLoading(false);\n            });\n        });\n    } return () => {\n      setData(['', '']);\n      setCategoryList([]);\n    };\n  }, [setData, setLoading, setCategoryList, state]);\n\n  return (\n    loading\n      ? <FoodLoader />\n      : (\n        <div>\n          <Header title=\"Comidas\" isButtonVisible />\n          <div className=\"meal-div-category\">\n            <button\n              type=\"button\"\n              data-testid=\"All-category-filter\"\n              onClick={ filterByCategory }\n              className=\"meal-btn-category\"\n            >\n              All\n            </button>\n            {loading ? null : categoryButtons()}\n          </div>\n          <RecipesCardsContainer test=\"recipe\" />\n          <FooterMenu />\n        </div>\n      )\n  );\n}\n\nexport default Foods;\n"]},"metadata":{},"sourceType":"module"}