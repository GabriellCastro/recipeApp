{"ast":null,"code":"var _jsxFileName = \"/home/gabriel/project/sd-011-project-recipes-app/src/pages/FoodDetails.js\";\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { getMealDetail } from '../services/theMealAPI';\nimport { getDrinkRecomendations } from '../services/theCockTailAPI';\nimport shareIcon from \"../images/shareIcon.svg\";\nimport Recommendations from '../components/Recommendations';\nimport VerifyStart from '../helpers/VerifyStart';\n\nconst FoodDetails = props => {\n  const [foodData, setfoodData] = useState({\n    strYoutube: ''\n  });\n  const [recomendedDrink, setRecomendedDrink] = useState([]);\n  const [copy, setCopy] = useState(false);\n  const {\n    match: {\n      params: {\n        id\n      }\n    }\n  } = props;\n  const maxResult = 6;\n  useEffect(() => {\n    const getFoodDetail = async () => {\n      const data = await getMealDetail(id);\n      setfoodData(...data);\n    };\n\n    getFoodDetail();\n  }, [id]);\n  useEffect(() => {\n    const fetchRecomended = async () => {\n      const recomendedArray = await getDrinkRecomendations();\n      setRecomendedDrink(recomendedArray);\n      console.log(recomendedArray);\n    };\n\n    fetchRecomended();\n  }, []);\n  const {\n    strMeal,\n    strMealThumb,\n    strCategory,\n    strInstructions,\n    strYoutube\n  } = foodData;\n  const maxIngredients = 20;\n\n  function listIngredients() {\n    const list = [];\n\n    for (let index = 1; index <= maxIngredients; index += 1) {\n      if (foodData[`strIngredient${index}`]) {\n        list.push(`${foodData[`strIngredient${index}`]} - ${foodData[`strMeasure${index}`]}`);\n      }\n    }\n\n    return list;\n  }\n\n  function shareLink() {\n    setCopy(true);\n    return navigator.clipboard.writeText(window.location.href);\n  }\n\n  function getVideoTag() {\n    const index = 32;\n    const videoStr = strYoutube.slice(index);\n    return videoStr;\n  }\n\n  function renderDetails() {\n    return /*#__PURE__*/React.createElement(\"section\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      \"data-testid\": \"recipe-photo\",\n      src: strMealThumb,\n      alt: strMeal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"h2\", {\n      \"data-testid\": \"recipe-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }\n    }, strMeal), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      \"data-testid\": \"share-btn\",\n      onClick: () => shareLink(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }\n    }, copy ? /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 13\n      }\n    }, \"Link copiado!\") : /*#__PURE__*/React.createElement(\"img\", {\n      src: shareIcon,\n      alt: \"Compartilhar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 16\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      \"data-testid\": \"favorite-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }\n    }, \"Favoritar\"), /*#__PURE__*/React.createElement(\"h4\", {\n      \"data-testid\": \"recipe-category\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }\n    }, strCategory), /*#__PURE__*/React.createElement(\"ol\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }\n    }, listIngredients().map((ingredient, index) => /*#__PURE__*/React.createElement(\"li\", {\n      key: index,\n      \"data-testid\": `${index}-ingredient-name-and-measure`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 15\n      }\n    }, `${ingredient}`))), /*#__PURE__*/React.createElement(\"p\", {\n      \"data-testid\": \"instructions\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }\n    }, strInstructions), /*#__PURE__*/React.createElement(\"iframe\", {\n      width: \"560\",\n      height: \"315\",\n      src: `https://www.youtube.com/embed/${getVideoTag()}`,\n      title: \"YouTube video player\",\n      frameBorder: \"0\",\n      \"data-testid\": \"video\",\n      allow: \"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\",\n      allowFullScreen: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Recommendations, {\n      recommendations: recomendedDrink.slice(0, maxResult),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }\n    }));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 5\n    }\n  }, foodData && renderDetails(), /*#__PURE__*/React.createElement(VerifyStart, {\n    id: id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }\n  }));\n};\n\nFoodDetails.propTypes = {\n  match: PropTypes.shape(PropTypes.any).isRequired\n};\nexport default FoodDetails;","map":{"version":3,"sources":["/home/gabriel/project/sd-011-project-recipes-app/src/pages/FoodDetails.js"],"names":["React","useState","useEffect","PropTypes","getMealDetail","getDrinkRecomendations","Recommendations","VerifyStart","FoodDetails","props","foodData","setfoodData","strYoutube","recomendedDrink","setRecomendedDrink","copy","setCopy","match","params","id","maxResult","getFoodDetail","data","fetchRecomended","recomendedArray","console","log","strMeal","strMealThumb","strCategory","strInstructions","maxIngredients","listIngredients","list","index","push","shareLink","navigator","clipboard","writeText","window","location","href","getVideoTag","videoStr","slice","renderDetails","shareIcon","map","ingredient","propTypes","shape","any","isRequired"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { getMealDetail } from '../services/theMealAPI';\nimport { getDrinkRecomendations } from '../services/theCockTailAPI';\nimport shareIcon from '../images/shareIcon.svg';\nimport Recommendations from '../components/Recommendations';\nimport VerifyStart from '../helpers/VerifyStart';\n\nconst FoodDetails = (props) => {\n  const [foodData, setfoodData] = useState({ strYoutube: '' });\n  const [recomendedDrink, setRecomendedDrink] = useState([]);\n  const [copy, setCopy] = useState(false);\n  const { match: { params: { id } } } = props;\n\n  const maxResult = 6;\n\n  useEffect(() => {\n    const getFoodDetail = async () => {\n      const data = await getMealDetail(id);\n      setfoodData(...data);\n    };\n    getFoodDetail();\n  }, [id]);\n\n  useEffect(() => {\n    const fetchRecomended = async () => {\n      const recomendedArray = await getDrinkRecomendations();\n      setRecomendedDrink(recomendedArray);\n      console.log(recomendedArray);\n    };\n    fetchRecomended();\n  }, []);\n\n  const {\n    strMeal,\n    strMealThumb,\n    strCategory,\n    strInstructions,\n    strYoutube,\n  } = foodData;\n  const maxIngredients = 20;\n\n  function listIngredients() {\n    const list = [];\n    for (let index = 1; index <= maxIngredients; index += 1) {\n      if (foodData[`strIngredient${index}`]) {\n        list.push(\n          `${foodData[`strIngredient${index}`]} - ${foodData[`strMeasure${index}`]}`,\n        );\n      }\n    }\n    return list;\n  }\n\n  function shareLink() {\n    setCopy(true);\n    return navigator.clipboard.writeText(window.location.href);\n  }\n\n  function getVideoTag() {\n    const index = 32;\n    const videoStr = strYoutube.slice(index);\n    return videoStr;\n  }\n\n  function renderDetails() {\n    return (\n      <section>\n        <img data-testid=\"recipe-photo\" src={ strMealThumb } alt={ strMeal } />\n        <h2 data-testid=\"recipe-title\">{ strMeal }</h2>\n        <button\n          type=\"button\"\n          data-testid=\"share-btn\"\n          onClick={ () => shareLink() }\n        >\n          {copy ? (\n            <span>Link copiado!</span>\n          ) : (<img src={ shareIcon } alt=\"Compartilhar\" />)}\n        </button>\n        <button type=\"button\" data-testid=\"favorite-btn\">Favoritar</button>\n        <h4 data-testid=\"recipe-category\">{ strCategory }</h4>\n        <ol>\n\n          {\n            listIngredients().map((ingredient, index) => (\n              <li\n                key={ index }\n                data-testid={ `${index}-ingredient-name-and-measure` }\n              >\n                { `${ingredient}` }\n              </li>\n            ))\n          }\n        </ol>\n        <p data-testid=\"instructions\">{strInstructions}</p>\n        <iframe\n          width=\"560\"\n          height=\"315\"\n          src={ `https://www.youtube.com/embed/${getVideoTag()}` }\n          title=\"YouTube video player\"\n          frameBorder=\"0\"\n          data-testid=\"video\"\n          allow=\"accelerometer;\n          autoplay; clipboard-write;\n          encrypted-media; gyroscope;\n          picture-in-picture\"\n          allowFullScreen\n        />\n        <Recommendations recommendations={ recomendedDrink.slice(0, maxResult) } />\n      </section>\n    );\n  }\n\n  return (\n    <div>\n      { foodData && renderDetails() }\n      <VerifyStart id={ id } />\n    </div>\n  );\n};\n\nFoodDetails.propTypes = {\n  match: PropTypes.shape(PropTypes.any).isRequired,\n};\n\nexport default FoodDetails;\n"]},"metadata":{},"sourceType":"module"}